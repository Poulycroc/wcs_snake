var canvas=ctx=null,viewportX=viewportY=0,gridSize=tc=20,trail=[];window.onload=function(){canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),document.addEventListener("keydown",keyPush),setInterval(game,1e3/15)};var screen={draw:function({width:width,height:height},ctx){ctx.fillStyle="black",ctx.fillRect(0,0,width,height)}},food={x:15,y:15,spawn:function(){this.x=Math.floor(Math.random()*gridSize),this.y=Math.floor(Math.random()*gridSize)},draw:function(ctx){ctx.fillStyle="red",ctx.fillRect(this.x*gridSize,this.y*gridSize,gridSize-2,gridSize-2)}},snake={x:viewportX,y:viewportY,tail:5,initArray:function(){trail.push({x:viewportX,y:viewportY})},update:function(){for(this.x+=viewportX,this.y=this.y+viewportY,this.x==food.x&&this.y==food.y&&food.spawn();trail.length>this.tail;)trail.shift()},draw:function(ctx){console.log("TRAIL LENGTH 1->"+trail.length);for(let i=0;i<trail.length;i++)ctx.fillStyle="green",ctx.fillRect(trail[i].x*gridSize,trail[i].y*gridSize,gridSize-2,gridSize-2),trail.length<this.tail&&trail.push({x:viewportX,y:viewportY}),console.log("TRAIL LENGTH 2->"+trail.length)},outside:function({width:width,height:height}){this.x*gridSize>width&&(this.x=0),this.y*gridSize>height&&(this.y=0)}};function game(){screen.draw(canvas,ctx),snake.initArray(),snake.draw(ctx),snake.update(),snake.outside(canvas),food.draw(ctx)}function print(msg){ctx.font="30px Arial",ctx.strokeText(this.msg,10,50)}function changeVpPosition(x,y){viewportX=x,viewportY=y}function keyPush({keyCode:keyCode}){switch(keyCode){case 37:changeVpPosition(-1,0);break;case 38:changeVpPosition(0,-1);break;case 39:changeVpPosition(1,0);break;case 40:changeVpPosition(0,1)}}